//This helps
//--------------------------v
//https://github.com/mrdoob/three.js/wiki/Uniforms-types
var waveComposerShaderMaterial = {
  uniforms: function(numberOfWaveComponents){
    return {
      centralAmplitude: {value: new Array(numberOfWaveComponents)},
      beginFadingHeight: {type: new Array(numberOfWaveComponents)},
      fadeOutHeight: {type: new Array(numberOfWaveComponents)},
    }
  },

  fragmentShader: function(numberOfWaveComponents){
    let originalGLSL = [
      {fragment_glsl}
    ];

    let updatedLines = [];
    for(let i = 0, numLines = originalGLSL.length; i < numLines; ++i){
      updatedLines.push(originalGLSL[i].replace(/\$numwaveTextures/g, numberOfWaveComponents));
    }

    return updatedLines.join('\n');
  }

  vertexShader: function(){
    return [
      {vertex_glsl}
    ].join('\n');
  }
};
